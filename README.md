# Feature Screening with Conditional Rank Utility for Big-data Classification

## What is included?

This folder contains R code and data to reproduce the numerical results presented in the 
paper (i.e. Figures 1-2 and Tables 2-7). Note that Table 1 in the paper is purely descriptive 
and is not a result of any numerical experiment.

The mean (averaged) computational time reported in the tables are machine-specific; it only serves as 
a reference and may not be exactly reproduced by a user.

There are six items in the main folder, including two files and four subfolders. The Two files 
are: "proj_file.Rproj" and "README.md". The four subfolders are: "scripts", "data", "figures" and "tables".
  
Details of each item are described below. 
  
  - "proj_file.Rproj": a project file for opening the project with Rstudio. 

  - "README.md": documentation on workflow and related information about the replication code.
  
  - subfolder "scripts" contains the following files:
      - "CRU_function.R": a helper R file containing functions needed to run the replication code; 
      - "CRU_ReplicationCode_Full.R": full replication code to reproduce the numerical results;
      - "CRU_ReplicationCode_ShortRunTime.R": replication code with short runtime for testing purposes.

  - subfolder "data" contains the following 6 data files (feature sets) that are analyzed in Section 4.2; 
    see Data section of this README file for more information about these data files.
     - fac.txt  
     - fou.txt  
     - kar.txt  
     - mor.txt  
     - pix.txt  
     - zer.txt  
  
  - subfolder "figures" is a placeholder to store the two figure outputs after running the replication code.
    The two figure outputs (in .pdf format) correspond to Figures 1-2 in the paper.
 
  - subfolder "tables" is a placeholder to store the six table outputs after running the replication code.
    The six table outputs (in .xlsx format) correspond to Tables 2-7 in the paper.
    
    
## Requirements

The numerical results in the paper are obtained by running "CRU_ReplicationCode_Full.R" with software R 
(version 4.2.1) via Rstudio (version 2022.12.0+353) on a Windows computer with 3.2 GHz CPUs and 32 GB memory.

The replication code uses the following R packages.

  - Package "here" (version 1.0.1) is needed to run the replication code with relative paths linked to
      the top-level directory storing the project file "proj_file.Rproj".

  - Package "mnormt" (version 2.1.1) is needed to construct Table 6 with setup (f); it is used to generate
      a feature matrix based on a user-specified multivariate normal distribution.   

  - Package "class" (version 7.3-20) is needed to construct Table 7; it is used to implement KNN classifier.

  - Package "writexl" (version 1.4.2) is needed to export Tables 2-7 in ".xlsx" format.

To run the code, the user will need to have the above packages installed. One may use the command 
install.packages(c("here", "mnormt", "class", "writexl")) to install these packages before running the code; 
alternatively, one can run the code with the install.packages command at the beginning of the R script uncommented. 

 
## Workflow 

To reproduce the numerical results of the paper, one may follow the steps below to run the replication code.

   -  Open the project file "proj_file.Rproj" using File/Open Project within RStudio or by double–clicking on
      the file outside R.
   
   -  Within RStudio, source R script "CRU_ReplicationCode_Full.r" in subfolder "scripts".

   -  The figure outputs will be stored in subfolder "figures".

   -  The table outputs will be stored in subfolder "tables".

Please note that "CRU_ReplicationCode_Full.r" will have a long runtime (see Runtime section of this README file).
For testing purposes, one can run "CRU_ReplicationCode_ShortRunTime.r" in stead of "CRU_ReplicationCode_Full.r". 

  - "CRU_ReplicationCode_ShortRunTime.r" roughly reproduces the tables and figures in a simplified setup, 
    where less random repetitions are used with a reduced number of (simulated) features.

  - It has a moderate runtime on a regular computer and is recommended if someone wants to test the code. 

  - The tables and figures generated by "CRU_ReplicationCode_ShortRunTime.r" will be similar in shape to 
    the ones presented in the paper.

## Runtime 

The runtime of "CRU_ReplicationCode_Full.r"/"CRU_ReplicationCode_ShortRunTime.r" to exactly/roughly 
reproduce each figure/table in the paper is given below. The results are obtained on a Windows computer 
with 3.2 GHz CPUs and 32 GB memory.

   -  Figure 1: 3  minutes to exactly reproduce;   18  seconds  to roughly reproduce.
   -  Figure 2: 15 minutes to exactly reproduce;   89  seconds  to roughly reproduce.
   -  Table 2 : 4  minutes to exactly reproduce;   26 seconds   to roughly reproduce.
   -  Table 3 : 126 hours  to exactly reproduce;   28 miniutes  to roughly reproduce.
   -  Table 4 : 62  hours  to exactly reproduce;   13 miniutes  to roughly reproduce.	
   -  Table 5 : 157 hours  to exactly reproduce;   30 miniutes  to roughly reproduce.
   -  Table 6 : 48  hours  to exactly reproduce;   47 miniutes  to roughly reproduce.
   -  Table 7 : 40  hours  to exactly reproduce;   24 miniutes  to roughly reproduce.


## Data 

   - Abstract: 
     
     The dataset analyzed in Section 4.2 of the manuscript contains 649 features of handwritten numerals ("0"--"9")
     extracted from a collection of Dutch utility maps. The identity of a handwritten numeral (pattern)
     is regarded as a categorical response, which leads to 10 classes in total. For each class, 200 patterns
     have been digitized in 30 x 48 binary images; this results in a total of 2000 images. The first 200 images
     are of class "0", followed by sets of 200 images for each of the classes "1"--"9".

     For each of the 2000 images, six groups of features (649 in total) are collected based on different
     processing methods. The measurements of those features are respectively stored in six separate feature
     sets (files): "fac.txt", "fou.txt", "kar.txt", "mor.txt", "pix.txt", and "zer.txt".  
     
     Each of the feature sets contains 2000 rows corresponding to the 2000 images; the same row index in
     different feature sets refer to the same image. Features of an image are recorded in different columns.
   
   - Features：

     The features collected in the six feature sets are as follows.

      - "fac.txt": 216 profile correlations. These features are extracted by measuring similarities in
                   the shape of different handwritten numerals.

      - "fou.txt": 76 Fourier coefficients of the character shapes. These features are used to describe
                   a two-dimensional closed shape of an image.      
    
      - "kar.txt": 64 coefficients related to a Karhunen-Loève orthogonalization of an image.

      - "mor.txt": 6 morphological features collected from the skeleton of an image.   

      - "pix.txt": 240-pixel averages in 2 x 3 windows over a 30 x 48 image.
    
      - "zer.txt": 47 rotation invariant Zernike moments, which map an image onto a set of orthogonal
                   functions.
                  
  - Availability:

     The dataset is publicly available for download from https://archive.ics.uci.edu/ml/datasets/Multiple+Features.

   - Description: 

     See Abstract for data description. The entries are numerical and SPACE-separated. There are No missing values. 
     In the manuscript, the dataset is merely used to demostrate the proposed feature screening method as a real data example.  

   - References:

     For more details about the dataset, please see the references below.

     [1] A. K. Jain, R. P. W. Duin, and Jianchang Mao. (2000). Statistical pattern recognition: a review. 
         IEEE Transactions on Pattern Analysis and Machine Intelligence, vol.22, no.1, 4-37. 

     [2] M. van Breukelen, R.P.W. Duin, D.M.J. Tax, and J.E. den Hartog. (1988). Handwritten digit recognition
         by combined classifiers, Kybernetika, vol.34, no.4, 381-386.
    
    
    
